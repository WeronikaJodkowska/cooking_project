{% extends "recipes/base.html" %}
{% load static %}

{% block title %}
    {{ recipe.name }}
{% endblock %}

{% block content %}
    <div class="recipe-detail">
        <img src="{{ recipe.image.url }}">
        <h1>{{ recipe.name }}</h1>
        <a href="{% url 'account:favourite_recipe_add' recipe.id %}" class="btn btn-outline-primary">Add to Favourites</a>
        <br>
{#        <a href="{% url 'account:add_to_cart' recipe.id %}" class="btn btn-outline-primary">Add to Cart</a>#}
        <a href="{% url 'cart:add_to_cart' recipe.id %}" class="btn btn-outline-primary">Add to Cart</a>
{#        <form action="{% url 'cart:cart_add' %}" method="post">#}
{#            {% csrf_token %}#}
{#            {{ form.as_p }}#}
{#            <input type="submit" value="Add to cart" />#}
{#        </form>#}

        <h2>{{ recipe.category }}</h2>

        <h1>Ингредиенты</h1>

        {% for ingredient in recipe.list_ingredient.all %}
{#            {% for item in same %}#}
            {% if ingredient == same.item.0 %}
                <strike><ul><li>{{ ingredient.name }}</li></ul></strike>
            {% else %}
                <ul><li>{{ ingredient.name }}</li></ul>
            {% endif %}
{#                {% endfor %}#}
        {% endfor %}

<h1>Ваши болезни</h1>
    {% for blacklist in blacklist %}
    <h1>{{ blacklist.disease }}</h1>

        {% for ingredient in blacklist.disease.list_ingredient.all %}
            {% for item in same %}
            {% for j in item %}
{#            {% if ingredient in same.items %}#}
                {% if ingredient == j %}
                    <ul><li>{{ ingredient.name }}</li></ul>
{#            {% endif %}#}
                {% endif %}
                {% endfor %}
        {% endfor %}
            {% endfor %}
    {% endfor %}

        {{ recipe.directions|linebreaks }}
{##}
{#    {% for i in r_ingredients.all %}#}
{#    {{ i }}#}
{#    {% endfor %}#}

    <h1>Совпадающие</h1>

        {% for item in same %}
            {% for j in item %}
                {{ j }}
            {% endfor %}
        {% endfor %}

{#    {% for item in same %}#}
{#{{ item.0 }}#}
{#    {% endfor %}#}
<br>
    {{ same.all }}
    {% for i in same.list %}
    {{ i.0 }}
    {% endfor %}
    </div>
{% endblock %}
